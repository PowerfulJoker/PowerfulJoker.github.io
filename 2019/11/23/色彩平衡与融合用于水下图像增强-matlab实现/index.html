<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="色彩平衡与融合用于水下图像增强(matlab实现)"><meta name="keywords" content="水下图像增强"><meta name="author" content="某獠,undefined"><meta name="copyright" content="某獠"><title>色彩平衡与融合用于水下图像增强(matlab实现)【Joker】</title><link rel="stylesheet" href="/css/fan.css"><link rel="stylesheet" href="/css/thirdparty/jquery.mCustomScrollbar.min.css"><link rel="icon" href="/favicon.ico"><!-- script(src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML")--><script src="/js/mathjax/mathjax.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
});
</script><script>var isPassword = '' || false;
if (isPassword) {
    if (prompt('请输入文章密码') !== '') {
        alert('密码错误！');
        history.back();
    }
}</script><script>window.GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
}</script></head><body><canvas id="universe"></canvas><!--#body--><div id="sidebar"><div class="toggle-sidebar-info button-hover"><span data-toggle="文章目录">站点概览</span></div><div class="sidebar-toc"><div class="sidebar-toc-title">目录</div><div class="sidebar-toc-progress"><span class="progress-notice">您已阅读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc-progress-bar"></div></div><div class="sidebar-toc-content" id="sidebar-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#光的水下传播"><span class="toc-number">1.</span> <span class="toc-text">光的水下传播</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总体流程介绍"><span class="toc-number">2.</span> <span class="toc-text">总体流程介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#白平衡"><span class="toc-number">3.</span> <span class="toc-text">白平衡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#锐化与Gamma变换"><span class="toc-number">4.</span> <span class="toc-text">锐化与Gamma变换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#融合过程中的权重"><span class="toc-number">5.</span> <span class="toc-text">融合过程中的权重</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#金字塔建立及融合"><span class="toc-number">6.</span> <span class="toc-text">金字塔建立及融合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#处理结果及代码链接"><span class="toc-number">7.</span> <span class="toc-text">处理结果及代码链接</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info-avatar"><img class="author-info-avatar-img" src="/avatar.png"></div><div class="author-info-name">某獠</div><div class="author-info-description">Keep up!</div><div class="links-buttons"><a class="links-button button-hover" href="https://github.com/PowerfulJoker/PowerfulJoker.github.io" target="_blank">GitHub<i class="icon-dot bg-color7"></i></a><a class="links-button button-hover" href="mailto:741218399@qq.com" target="_blank">E-Mail<i class="icon-dot bg-color5"></i></a><a class="links-button button-hover" href="tencent://message/?uin=741218399&amp;Site=&amp;Menu=yes" target="_blank">QQ<i class="icon-dot bg-color2"></i></a></div><div class="author-info-articles"><a class="author-info-articles-archives article-meta" href="/archives"><span class="pull-top">日志</span><span class="pull-bottom">12</span></a><a class="author-info-articles-tags article-meta" href="/tags"><span class="pull-top">标签</span><span class="pull-bottom">7</span></a><a class="author-info-articles-categories article-meta" href="/categories"><span class="pull-top">分类</span><span class="pull-bottom">3</span></a></div></div></div><div id="main-container"><header><div id="menu-outer"><i class="menu-list-icon fas fa-bars"></i><nav id="menu-inner"><a class="menu-item" href="/">首页</a><a class="menu-item" href="/tags">标签</a><a class="menu-item" href="/categories">分类</a><a class="menu-item" href="/archives">归档</a><a class="menu-item" href="/about">关于</a></nav><div class="right-info"><a class="title-name" href="/">Joker</a><span id="now-time"></span></div></div></header><div id="content-outer"><div id="content-inner"><article id="post"><div class="post-header"><div class="title">色彩平衡与融合用于水下图像增强(matlab实现)</div><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 发表于 2019-11-23 | 更新于 2020-02-16</time><!--time.button-hover.post-date #[i.fas.fa-calendar-alt.article-icon(aria-hidden="true")] #[=__('post.modified')] #[=date(page['updated'], config.date_format)]--><div class="button-hover categories"></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/%E6%B0%B4%E4%B8%8B%E5%9B%BE%E5%83%8F%E5%A2%9E%E5%BC%BA/">水下图像增强</a></div></div></div><div class="main-content"><p>最近出于作业的需要，阅读了关于水下图像增强的论文《Color Balance and Fusion for Underwater Image Enhancement》，并且尝试着按照论文中所介绍的步骤使用matlab来实现，由于本人对图像处理初次接触，感觉做出来的效果一般，本文对论文提及的步骤进行简略介绍，代码是按照论文步骤做的，并不十分完善，此论文主要用于学习交流，若是有大佬看完本文，有好的建议愿意提供，欢迎QQ或邮箱联系。</p>
<h2 id="光的水下传播"><a href="#光的水下传播" class="headerlink" title="光的水下传播"></a>光的水下传播</h2><p><img src="/images/a502.png" alt="light"></p>
<p><img src="/images/a503.png" alt="jaffe_mc"><br>Jaffe-McGlamery图像模型，在水下介质中，一般像平面上的点上的总辐照度入射有三个主要分量:直接分量、前向散射和后向散射。<br><br><em>直接分量</em>是被目标物体直接反射到成像平面上的光分量，可表示为：<br><img src="/images/a504.png" alt="eq1"><br><em>前向散射</em>是由于光线在进入相机镜头的过程中发生了随机偏差。<br><br><em>后向散射</em>是由于人造光(如闪光)撞击水粒子，并反射回相机。表示为：<br><img src="/images/a505.png" alt="eq2"><br>忽略前向散射分量，简化水下光学模型为:<br><img src="/images/a506.png" alt="eq3"></p>
<p style="color:red;">论文提出的图像增强方法采用了两步策略，结合白平衡和图像融合来改善水下图像，而不需要借助于光学模型的显式反演。</p>

<h2 id="总体流程介绍"><a href="#总体流程介绍" class="headerlink" title="总体流程介绍"></a>总体流程介绍</h2><p>该论文提出的图像增强方法采用了两步策略，结合白平衡和图像融合来增强水下图像。<br><img src="/images/a501.png" alt="process"><br>白平衡的目的是补偿由颜色的深度选择性吸收造成的颜色投射，而图像融合的目的是增强场景的边缘和细节，以减轻由于后向散射造成的对比度损失。</p>
<h2 id="白平衡"><a href="#白平衡" class="headerlink" title="白平衡"></a>白平衡</h2><p>现有的白平衡算法基本都是基于一定的假设和先验条件。常见的白平衡算法有Max RGB、Gray World、Gray Edge。其中灰色世界算法对于合理失真的水下场景具有良好的视觉效果。然而，对极度恶化的水下场景进行更深入的研究发现，大多数传统方法的性能都很差。它们不能消除颜色的变化，通常看起来是蓝色的。最好的去除蓝色调的方法是灰色世界，但是我们观察到这种方法有严重的红色伪影。这些伪影是由于红色通道的一个非常小的平均值，导致该通道在出现红色的位置上的过度补偿(因为灰色世界通过其平均值来分割每个通道)。<br><br>论文中提出的白平衡算法基于以下四个观察/原则：</p>
<ol>
<li>与红色和蓝色的水道相比，绿色的水道在水下保存相对完好。长波长的光，即红光，在清澈的水中首先会消失;</li>
<li>绿色通道是相对于红色通道包含对手颜色信息的通道，因此补偿红色比绿色引起的更强的衰减尤为重要。因此，我们通过在红色通道中加入绿色通道的一部分来补偿红色衰减。我们最初尝试在红色中加入绿色和蓝色的部分，但论文经测试提出，只使用绿色通道的信息可以更好地恢复整个色谱，同时保持背景(水域)的自然外观;</li>
<li>补偿应与平均绿值和平均红值的差值成比例，因为在灰色世界假设下(所有通道在衰减前的平均值相同)，这种差值反映了红绿衰减之间的差异/不平衡;</li>
<li>为了避免在灰色世界算法中的红损耗补偿后的红通道饱和，对红通道的增强应该主要影响红通道值较小的像素值，而不应该改变已经包含重要红分量的像素。换句话说，绿色通道信息不应该在红色通道信息仍然重要的区域进行传输。</li>
</ol>
<p><img src="/images/a507.png" alt="upload"><br>论文中提到某些水质恶劣的图片是，可能需要对红色和蓝色通道补偿，所有作者在代码实现时，定义了一个阈值K，若绿色通道与蓝色通道的比值大于K，则对红色通道和蓝色通道均进行补偿；否则，只对红色通道进行补偿。</p>
<h2 id="锐化与Gamma变换"><a href="#锐化与Gamma变换" class="headerlink" title="锐化与Gamma变换"></a>锐化与Gamma变换</h2><p>Gamma变换：一般而言，白平衡水下图像往往显得太亮。<br>锐化：非锐化掩模<br>典型的掩模公式：S = I +β(I-GI),较小的β不能锐化I，但过大的β会导致过饱和区域，具有较亮的高光和较暗的阴影，论文使用的掩模公式：S=(I+N{I-GI})/2</p>
<h2 id="融合过程中的权重"><a href="#融合过程中的权重" class="headerlink" title="融合过程中的权重"></a>融合过程中的权重</h2><ol>
<li>拉普拉斯对比度权重<br><br>通过计算应用于每个输入亮度通道的拉普拉斯滤波器的绝对值来估计全局对比度。它为边缘和纹理分配了高值。然而，对于水下去雾任务，这个权值不足以恢复对比度，主要是因为它无法区分斜坡和平坦区域。</li>
<li>显著性权重<br><br>突出在水下场景中失去显著性的显著对象。<br></li>
<li>饱和权重<br><br>对高饱和区域的优化，使融合算法能够适应彩色信息。<br></li>
</ol>
<h2 id="金字塔建立及融合"><a href="#金字塔建立及融合" class="headerlink" title="金字塔建立及融合"></a>金字塔建立及融合</h2><p>多尺度分解基于拉普拉斯金字塔。金字塔表示将图像分解为带通图像的和。</p>
<p><img src="/images/a508.png" alt="eq4"></p>
<p>两个金字塔具有相同的层数，并且在每层上独立地执行拉普拉斯输入与高斯归一化权重的混合：</p>
<p><img src="/images/a509.png" alt="eq5"></p>
<h2 id="处理结果及代码链接"><a href="#处理结果及代码链接" class="headerlink" title="处理结果及代码链接"></a>处理结果及代码链接</h2><p><img src="/images/a510.png" alt="result1"></p>
<p><img src="/images/a511.png" alt="result2"></p>
<p><img src="/images/a512.png" alt="result3"></p>
<p>代码链接：<a href="https://github.com/PowerfulJoker/Underwater_Image" target="_blank" rel="noopener">https://github.com/PowerfulJoker/Underwater_Image</a></p>
</div><div class="post-copyright"><div class="post-copyright-author"><span class="post-copyright-meta">本文作者: </span><span class="post-copyright-info"><a href="mailto:undefined" target="_blank" rel="noopener">某獠</a></span></div><div class="post-copyright-type"><span class="post-copyright-meta">本文链接: </span><span class="post-copyright-info"><a href="https://powerfuljoker.github.io/2019/11/23/%E8%89%B2%E5%BD%A9%E5%B9%B3%E8%A1%A1%E4%B8%8E%E8%9E%8D%E5%90%88%E7%94%A8%E4%BA%8E%E6%B0%B4%E4%B8%8B%E5%9B%BE%E5%83%8F%E5%A2%9E%E5%BC%BA-matlab%E5%AE%9E%E7%8E%B0/">https://powerfuljoker.github.io/2019/11/23/%E8%89%B2%E5%BD%A9%E5%B9%B3%E8%A1%A1%E4%B8%8E%E8%9E%8D%E5%90%88%E7%94%A8%E4%BA%8E%E6%B0%B4%E4%B8%8B%E5%9B%BE%E5%83%8F%E5%A2%9E%E5%BC%BA-matlab%E5%AE%9E%E7%8E%B0/</a></span></div><div class="post-copyright-notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://powerfuljoker.github.io">Joker</a>！</span></div></div></article><div id="pagination"><div class="prev-post pull-left"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/2020/01/11/bugku-%E5%88%86%E6%9E%90/"><i class="fas fa-angle-left">&nbsp;</i><span>bugku 分析</span></a></div><div class="next-post pull-right"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/2019/11/21/%E5%B0%8F%E7%99%BD%E8%8F%9C%E9%B8%9F%E7%9A%84sqli-labs%E9%97%AF%E5%85%B35-6/"><span>小白菜鸟的sqli-labs闯关5-6</span><span>&nbsp;</span><i class="fas fa-angle-right"></i></a></div></div><!--div!= paginator()--></div></div><div class="button-hover" id="return-top"><i class="fas fa-arrow-up" aria-hidden="true"></i></div><footer><div id="footer"><div class="button-hover" id="side-button"><i class="fas fa-arrow-right"></i></div><div class="right-content"><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fas fa-file-o"></i></span><span id="busuanzi_value_page_pv"></span><span></span></div><div class="copyright">&copy;2017 ～ 2020 By 某獠</div></div></div></footer></div><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery-3.3.1.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/velocity.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery.mCustomScrollbar.concat.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/fan.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/canvas_bg.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/utils.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/scroll.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/sidebar.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/copy.js"></script><!--script(src=url)--></body></html>